<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Chi Tiết Phim</title>

    <!-- FONT GOOGLE -->
    <link
            href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400,700&display=swap"
            rel="stylesheet"
    />

    <!-- Font Awesome -->
    <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
            integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
    />

    <!-- BS4 CSS -->
    <link
            rel="stylesheet"
            href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
            integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
            crossorigin="anonymous"
    />

    <!-- Owl Carousel -->
    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
            crossorigin="anonymous"
    />

    <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css"
            integrity="sha512-tS3S5qG0BlhnQROyJXvNjeEM4UpMXHrQfTGmbQ1gKmelCxlSEBUaxhRBj/EFTzpbP4RVSrpEikbmdJobCvhE3g=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
    />

    <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css"
            integrity="sha512-sMXtMNL1zRzolHYKEujM2AqCLUR9F2C4/05cdbxjjLSRvMQIciEPCQZo++nk7go3BtSuK9kfa/s+a4f4i5pLkw=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
    />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/web/css/style.css" />
</head>
<body>
    <header class="container-fluid">
        <nav class="movieNavbar navbar navbar-expand-lg navbar-dark bg-dark">
            <a class="navbar-brand" href="/">
                <img
                        src="/images/logo.svg"
                        alt="MovieStar Logo" />
            </a>
            <button
                    class="navbar-toggler"
                    type="button"
                    data-toggle="collapse"
                    data-target="#movieNav"
                    aria-controls="navbarSupportedContent"
                    aria-expanded="false"
                    aria-label="Toggle navigation"
            >
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="movieNav">
                <ul class="navbar-nav">
                    <li class="nav-item active">
                        <a class="nav-link" href="/">Trang Chủ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/danh-sach-phim-le">Phim Lẻ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/danh-sach-phim-chieu-rap">Phim Chiếu Rạp</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/danh-sach-phim-bo">Phim Bộ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/danh-sach-bai-viet">Bài Viết</a>
                    </li>
                </ul>

                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <i class="fa-regular fa-user mx-3"></i>
                            Đăng Nhập</a
                        >
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <i class="fa-solid fa-user-plus mx-3"></i>
                            Đăng Ký</a
                        >
                    </li>
                </ul>
            </div>
        </nav>
    </header>

    <section class="py-4" id="movie-detail-cover">
        <div class="container-fluid">
            <div class="row">
                <div class="col-4 px-4">
                    <img class="poster-movie-detail rounded overflow-hidden w-100" th:src="${movie.poster}" alt="">
                </div>
                <div class="col-7">
                    <div class="row">
                        <h4 th:text="${movie.title}"></h4>
                    </div>
                    <div class="infomation-detail-movie p-2">
                        <div class="row p-2">
                            <div class="col-3">Thể Loại</div>
                            <div class="col-8">
                                <div class="property-movie w-100">
                                    <span><th:block th:text="${movie.getType().value}"></th:block></span>
                                </div>
                            </div>
                        </div>
                        <div class="row p-2">
                            <div class="col-3">Năm sản Xuất</div>
                            <div class="col-8">
                                <div class="property-movie w-100">
                                    <span><th:block th:text="${movie.releaseYear}"></th:block></span>
                                </div>
                            </div>
                        </div>
                        <div class="row p-2">
                            <div class="col-3">Đạo Diễn</div>
                            <div class="col-8">
                                <div class="property-movie w-100" >
                                        <span th:each="director : ${movie.directors}"> <th:block th:text="${director.getName()}"></th:block>,
                                        </span>

                                </div>
                            </div>
                        </div>
                        <div class="row p-2">
                            <div class="col-3">Diễn Viên</div>
                            <div class="col-8">
                                <div class="property-movie w-100" >
                                    <span th:each="actor : ${movie.actors}"> <th:block th:text="${actor.getName()}"></th:block>,</span>
                                </div>
                            </div>
                        </div>
                        <div class="row p-2">
                            <div class="col-3">Mô Tả</div>
                            <div class="col-8">
                                <div class="property-movie w-100">
                                    <span><th:block th:text="${movie.description}"></th:block></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row py-2" >
                        <div class="rating">
                            <span th:text="|Bộ phim hiện có ${reviewList.size()} đánh giá|"></span>
                            <div>
                                <span> <th:block th:text="|${movie.rating}/10|"></th:block><i class="fa-solid fa-star" style="color: #FFD43B;"></i></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="py-4">
        <div class="container-fluid mb-3">
            <div class="embed-responsive embed-responsive-16by9">
                <!-- Replace the URL in the src attribute with the embed URL of your video -->
                <iframe
                        class="embed-responsive-item"
                        src="https://www.youtube.com/embed/HH6tnTQUJD4"
                        width="1280"
                        height="500"
                        allowfullscreen
                ></iframe>
            </div>
        </div>
    </section>

    <!-- comment -->
    <section class="comment-movie">
        <div class="container">
            <div class="row">
                <div class="col-2"></div>
                <div class="col-7">
                    <div class="row">
                        <div class="d-flex justify-content-between ">
                            <h4>Bình Luận</h4>
                            <!--                        <a href="" class="text-decoration-none text-reset pt-1">Hiển thị tất cả bình luận</a>-->
                        </div>
                    </div>
                    <div class="row">
                        <!--                    <div class="input-comment px-3 pb-2">-->
                        <!--                        <label>-->
                        <!--                            <input class="w-100 rounded overflow-hidden my-2" type="text" placeholder="Viết bình luận . . . .">-->
                        <!--                        </label>-->
                        <!--                    </div>-->
                        <div class="cancel-comment d-flex justify-content-end">
                            <!--                        <button style="background-color:#F0F0F0" type="button" class="mx-2">Hủy</button>-->
                            <!-- Button trigger modal -->
                            <button  type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
                                Viết đánh giá
                            </button>

                            <!-- Modal -->
                            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLabel">Đánh giá bộ phim</h5>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="rating d-flex justify-content-center">
                                            <span class="star px-1" data-rating="1">
                                                  <i class="fa-solid fa-star"></i>
                                            </span>
                                                <span class="star  px-1" data-rating="2">
                                                  <i class="fa-solid fa-star"></i>
                                            </span>
                                                <span class="star  px-1" data-rating="3">
                                                  <i class="fa-solid fa-star"></i>
                                            </span>
                                                <span class="star  px-1" data-rating="4">
                                                  <i class="fa-solid fa-star"></i>
                                            </span>
                                                <span class="star  px-1" data-rating="5">
                                                  <i class="fa-solid fa-star"></i>
                                            </span>
                                                <span class="star  px-1" data-rating="6">
                                                  <i class="fa-solid fa-star"></i>
                                            </span>
                                                <span class="star  px-1" data-rating="7">
                                                  <i class="fa-solid fa-star"></i>
                                            </span>
                                                <span class="star  px-1" data-rating="8">
                                                  <i class="fa-solid fa-star"></i>
                                            </span>
                                                <span class="star  px-1" data-rating="9">
                                                  <i class="fa-solid fa-star"></i>
                                            </span>
                                                <span class="star  px-1" data-rating="10">
                                                  <i class="fa-solid fa-star"></i>
                                            </span>
                                        </div>
                                        <div class="d-flex justify-content-center" id="rating-value"></div>
                                        <div class="modal-body">
                                            <input id="comment" class="w-100 rounded overflow-hidden  my-2" type="text" placeholder="Viết bình luận . . . .">
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                                            <button id="submitCreateReview" type="button" class="btn btn-primary" data-bs-dismiss="modal">Gửi Đánh Giá</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row " th:each="review : ${reviewList}">
                        <div class="col-1">
                            <div class="avatar-user ">
                                <img class="w-100" th:src="${review.user.avatar}" alt="">
                            </div>
                        </div>
                        <div class="col-11">
                            <div class="content-comment">
                                <h6><th:block th:text="${review.user.name}"></th:block></h6>
                                <span th:each="star : ${#numbers.sequence(1, review.rating)}" class="star">
                                 <i class="fa-solid fa-star" style="color: #FFD43B;"></i>
                            </span>
                                <p class="mb-6"><th:block th:text="${review.comment}"></th:block></p>
                                <span><th:block th:text="${review.updatedAt}"></th:block></span>
                                <span class="update-review">
                                <a class="text-reset text-decoration-none" href="" data-bs-toggle="modal" data-bs-target="#exampleModal">Chỉnh sửa</a>
                            </span>
                                <span class="delete-review">
                                <a class="text-reset text-decoration-none" href="" id="submitDeleteReview">Xóa</a>
                            </span>
                            </div>

                        </div>
                    </div>


                </div>
                <div class="col-3">
                    <div class="row">
                        <h5 class="ms-2">Phim Đề Xuất</h5>
                    </div>
                    <div class="recomment-movie mb-5" th:each="movie: ${relatedMovieList}">
                        <div class="row">
                            <a class="text-reset text-decoration-none d-flex" th:href="@{/phim/{id}/{slug} (id=${movie.id},slug=${movie.slug}) }">
                                <div class="col-5">
                                    <div class="image-movie ms-1 my-1 ">
                                        <img class="rounded overflow-hidden w-100" th:src="${movie.poster}" alt="">
                                    </div>
                                </div>
                                <div class="col-7">
                                    <div class="title-movie ms-2">
                                        <h6 th:text="${movie.title}"></h6>
                                        <span > <th:block th:text="${movie.rating}"></th:block><i class="fa-solid fa-star" style="color: #FFD43B;"></i></span>
                                        <p><th:block th:text="${movie.releaseYear}"></th:block></p>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="bg-dark py-4 text-white container-fluid">
        <div class="row">
            <div class="col-md-4">
                <img src="./assets/images/logo.svg" alt="" class="logo px-3" />
                <p class="mt-2 px-3">
                    <span>Movie Star</span> là website <i>xem phim online</i> với hơn
                    10000 <span>phim hay</span> nhất chất lượng HD, phụ đề tiếng việt
                    được cập nhật liên tục phim mới hàng ngày để phục vụ người xem.<br />
                    Đến với HDViet, bạn sẽ có những phút giây thoải mái cùng những bộ
                    <a href="#">phim hài</a>
                    vui nhộn,
                    <a href="#">phim hành động</a>
                    đặc sắc... cũng như những bộ phim tâm lý tình cảm Hàn Quốc, Trung
                    Quốc... Chúc bạn <span>xem phim</span> vui vẻ cùng HDViet.
                </p>
            </div>
            <div class="col-md-2">
                <h5 class="text-uppercase mb-3">Danh mục</h5>
                <p>Tin tức</p>
                <p>Phim chiếu rạp</p>
                <p>Phim bộ</p>
                <p>Phim lẻ</p>
                <p>TV Show</p>
            </div>
            <div class="col-md-2">
                <h5 class="text-uppercase mb-3">Thể loại</h5>
                <p>Phim cổ trang</p>
                <p>Phim đam mỹ</p>
                <p>Phim bách hợp</p>
                <p>Phim viễn tưởng</p>
                <p>Phim hoạt hình</p>
            </div>
            <div class="col-md-2">
                <h5 class="text-uppercase mb-3">Điều khoản</h5>
                <p>DMCA</p>
                <p>Liên hệ</p>
                <p>Privacy</p>
                <p>Terms of Service</p>
            </div>

            <div class="col-md-2">
                <h5 class="text-uppercase mb-3">SOCIAL</h5>
                <div class="d-flex">
                    <p class="fs-4 me-3">
                        <span><i class="fa-brands fa-facebook"></i></span>
                    </p>
                    <p class="fs-4 me-3 px-2">
                        <span><i class="fa-brands fa-twitter"></i></span>
                    </p>
                    <p class="fs-4 me-2">
                        <span><i class="fa-brands fa-youtube"></i></span>
                    </p>
                </div>
            </div>
        </div>

        <div class="copyright">
            <p>© 2024 MovieStar. All rights reserved</p>
        </div>
    </footer>

    <!-- BS4 JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.js"></script>
    <script
            src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
            integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
            crossorigin="anonymous"
    ></script>

    <script
            src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
            integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
            crossorigin="anonymous"
    ></script>

    <script
            src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"
            integrity="sha512-3gJwYpMe3QewGELv8k/BX9vcqhryRdzRMxVfq6ngyWXwo03GFEzjsUm8Q7RZcHPHksttq7/GFoxjCVUjkjvPdw=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
    ></script>
    <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
            crossorigin="anonymous"
    ></script>
    <script
            src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"
            integrity="sha512-bPs7Ae6pVvhOSiIcyUClR7/q2OAsRiovw4vAkX+zJbw3ShAeeqezq50RIIcIURq7Oa20rW2n2q+fyXBNcU9lrw=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
    ></script>

    <script>
        $(document).ready(function () {
            $(".movie-list").owlCarousel({
                items: 4,
                margin: 20,
                loop: true,
            });
        });
    </script>

    <script th:src="@{/web/js/main.js}"></script>
</body>
</html>